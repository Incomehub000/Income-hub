<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® - INCOME HUB</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .register-container {
            max-width: 500px;
            margin: 100px auto;
            padding: 30px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .register-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        .form-group label {
            font-weight: bold;
            color: #333;
            font-size: 14px;
        }
        .form-group input {
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        .form-group input:focus {
            border-color: #667eea;
            outline: none;
        }
        .required::after {
            content: " *";
            color: red;
        }
        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s;
            margin-top: 10px;
        }
        .submit-btn:hover {
            transform: translateY(-2px);
        }
        .login-link {
            text-align: center;
            margin-top: 20px;
        }
        .login-link a {
            color: #667eea;
            text-decoration: none;
        }
        .bonus-info {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #4CAF50;
        }
        .referral-system {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #2196F3;
        }
        .no-bonus {
            background: #ffebee;
            padding: 10px;
            border-radius: 8px;
            margin: 5px 0;
            border-left: 4px solid #f44336;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <h2><a href="index.html" style="color: white; text-decoration: none;">INCOME HUB</a></h2>
            </div>
            <div class="nav-buttons">
                <button class="btn login-btn" onclick="window.location.href='login.html'">‡¶≤‡¶ó‡¶á‡¶®</button>
                <button class="btn register-btn" onclick="window.location.href='index.html'">‡¶π‡ßã‡¶Æ</button>
            </div>
        </div>
    </nav>

    <section class="register-section">
        <div class="register-container">
            <h2 style="text-align: center; margin-bottom: 20px; color: #333;">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
            
            <div id="referralBonusInfo" class="bonus-info" style="display: none;">
                <strong>üéÅ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏:</strong> <span id="bonusAmount">0</span> ‡¶ï‡¶Ø‡¶º‡ßá‡¶® ‡¶´‡ßç‡¶∞‡¶ø!
            </div>
            
            <div id="noBonusInfo" class="no-bonus" style="display: none;">
                <strong>‚ÑπÔ∏è ‡¶®‡ßã‡¶ü:</strong> ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶ï‡ßã‡¶° ‡¶õ‡¶æ‡¶°‡¶º‡¶æ ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶ï‡¶∞‡¶≤‡ßá ‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶™‡¶æ‡¶¨‡ßá‡¶® ‡¶®‡¶æ
            </div>
            
            <div class="referral-system">
                <strong>üë• ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ:</strong><br>
                ‚Ä¢ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡¶æ‡¶∞ ‡¶™‡¶æ‡¶¨‡ßá: <strong>‡ß®‡ß¶‡ß¶ ‡¶ï‡¶Ø‡¶º‡ßá‡¶®</strong><br>
                ‚Ä¢ ‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶™‡¶æ‡¶¨‡ßá: <strong>‡ßß‡ß¶‡ß¶ ‡¶ï‡¶Ø‡¶º‡ßá‡¶®</strong><br>
                ‚Ä¢ ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶®: <strong>‡ß¶ ‡¶ï‡¶Ø‡¶º‡ßá‡¶®</strong>
            </div>
            
            <form class="register-form" id="registerForm">
                <div class="form-group">
                    <label for="fullName" class="required">‡¶™‡ßÅ‡¶∞‡ßã ‡¶®‡¶æ‡¶Æ</label>
                    <input type="text" id="fullName" name="fullName" required placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡ßÅ‡¶∞‡ßã ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">
                </div>
                
                <div class="form-group">
                    <label for="whatsapp" class="required">WhatsApp ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞</label>
                    <input type="tel" id="whatsapp" name="whatsapp" required placeholder="01XXXXXXXXX">
                </div>
                
                <div class="form-group">
                    <label for="phone" class="required">‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞</label>
                    <input type="tel" id="phone" name="phone" required placeholder="01XXXXXXXXX">
                </div>
                
                <div class="form-group">
                    <label for="email" class="required">‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ</label>
                    <input type="email" id="email" name="email" required placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶†‡¶ø‡¶ï‡¶æ‡¶®‡¶æ">
                </div>
                
                <div class="form-group">
                    <label for="password" class="required">‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶°</label>
                    <input type="password" id="password" name="password" required placeholder="‡¶∂‡¶ï‡ßç‡¶§‡¶ø‡¶∂‡¶æ‡¶≤‡ßÄ ‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶¶‡¶ø‡¶®">
                </div>
                
                <div class="form-group">
                    <label for="confirmPassword" class="required">‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶®</label>
                    <input type="password" id="confirmPassword" name="confirmPassword" required placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">
                </div>
                
                <div class="form-group">
                    <label for="referralCode">‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶ï‡ßã‡¶°</label>
                    <input type="text" id="referralCode" name="referralCode" placeholder="‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶ï‡ßã‡¶° ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" value="">
                    <small style="color: #666; font-size: 12px;">‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶ï‡ßã‡¶° ‡¶¶‡¶ø‡¶≤‡ßá ‡ßß‡ß¶‡ß¶ ‡¶ï‡¶Ø‡¶º‡ßá‡¶® ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶™‡¶æ‡¶¨‡ßá‡¶®!</small>
                </div>
                
                <button type="submit" class="submit-btn">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</button>
            </form>
            
            <div class="login-link">
                <p>‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶Ü‡¶õ‡ßá? <a href="login.html">‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</a></p>
            </div>
        </div>
    </section>

    <script>
        function getReferralCodeFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('ref');
        }

        document.addEventListener('DOMContentLoaded', function() {
            const referralCode = getReferralCodeFromURL();
            const referralCodeInput = document.getElementById('referralCode');
            const referralBonusInfo = document.getElementById('referralBonusInfo');
            const noBonusInfo = document.getElementById('noBonusInfo');
            const bonusAmount = document.getElementById('bonusAmount');
            
            if (referralCode) {
                referralCodeInput.value = referralCode;
                referralBonusInfo.style.display = 'block';
                noBonusInfo.style.display = 'none';
                bonusAmount.textContent = '‡ßß‡ß¶‡ß¶';
            } else {
                referralBonusInfo.style.display = 'none';
                noBonusInfo.style.display = 'block';
            }
        });

        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const referralCode = document.getElementById('referralCode').value.trim();
            
            if (password !== confirmPassword) {
                alert('‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶Æ‡¶ø‡¶≤‡¶õ‡ßá ‡¶®‡¶æ! ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
                return;
            }
            
            if (password.length < 6) {
                alert('‡¶™‡¶æ‡¶∏‡¶ì‡¶Ø‡¶º‡¶æ‡¶∞‡ßç‡¶° ‡¶ï‡¶Æ‡¶™‡¶ï‡ßç‡¶∑‡ßá ‡ß¨ ‡¶Ö‡¶ï‡ßç‡¶∑‡¶∞‡ßá‡¶∞ ‡¶π‡¶§‡ßá ‡¶π‡¶¨‡ßá!');
                return;
            }

            let bonusCoins = 0;
            
            if (referralCode !== '') {
                bonusCoins = 100;
            }

            const userReferralCode = generateReferralCode();

            const userData = {
                id: Date.now().toString(),
                fullName: document.getElementById('fullName').value,
                whatsapp: document.getElementById('whatsapp').value,
                phone: document.getElementById('phone').value,
                email: document.getElementById('email').value,
                password: password,
                referralCode: userReferralCode,
                referredBy: referralCode || null,
                coins: bonusCoins,
                freeBalance: bonusCoins,
                premiumBalance: 0,
                referralBalance: 0,
                registrationDate: new Date().toISOString(),
                premium: false,
                totalEarned: 0,
                referredUsers: [],
                totalReferrals: 0,
                activeReferrals: 0,
                incomeHistory: [],
                withdrawHistory: []
            };
            
            if (referralCode && referralCode !== '') {
                applyReferralBonus(referralCode, userData.id, userData.fullName);
            }
            
            let users = JSON.parse(localStorage.getItem('incomeHubUsers') || '[]');
            
            const existingUser = users.find(u => u.email === userData.email || u.phone === userData.phone);
            if (existingUser) {
                alert('‡¶è‡¶á ‡¶á‡¶Æ‡ßá‡¶á‡¶≤ ‡¶¨‡¶æ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
                return;
            }
            
            users.push(userData);
            localStorage.setItem('incomeHubUsers', JSON.stringify(users));
            
            let successMessage = `‚úÖ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶â‡¶®‡ßç‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶§‡ßà‡¶∞‡¶ø ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!\n\n`;
            
            if (bonusCoins > 0) {
                successMessage += `üí∞ ‡¶Ü‡¶™‡¶®‡¶ø ‡¶™‡ßá‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡¶®: ${bonusCoins} ‡¶ï‡¶Ø‡¶º‡ßá‡¶® ‡¶¨‡ßã‡¶®‡¶æ‡¶∏\n`;
            } else {
                successMessage += `‚ÑπÔ∏è ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶ï‡¶∞‡¶æ‡¶Ø‡¶º ‡¶ï‡ßã‡¶®‡ßã ‡¶¨‡ßã‡¶®‡¶æ‡¶∏ ‡¶™‡¶æ‡¶¨‡ßá‡¶® ‡¶®‡¶æ\n`;
            }
            
            successMessage += `üéØ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶ï‡ßã‡¶°: ${userReferralCode}\n`;
            successMessage += `\nüìß ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßá ‡¶á‡¶®‡¶ï‡¶æ‡¶Æ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®!`;
            
            alert(successMessage);
            window.location.href = 'login.html';
        });

        function applyReferralBonus(referralCode, newUserId, newUserName) {
            let users = JSON.parse(localStorage.getItem('incomeHubUsers') || '[]');
            const referrer = users.find(u => u.referralCode === referralCode);
            
            if (referrer) {
                referrer.referralBalance = (referrer.referralBalance || 0) + 200;
                referrer.coins = (referrer.coins || 0) + 200;
                referrer.referredUsers.push(newUserId);
                referrer.totalReferrals = (referrer.totalReferrals || 0) + 1;
                
                if (!referrer.referralHistory) referrer.referralHistory = [];
                referrer.referralHistory.push({
                    type: 'registration',
                    fromUser: newUserName,
                    fromUserId: newUserId,
                    amount: 200,
                    date: new Date().toLocaleString('bn-BD'),
                    description: '‡¶®‡¶§‡ßÅ‡¶® ‡¶∞‡ßá‡¶ú‡¶ø‡¶∏‡ßç‡¶ü‡ßç‡¶∞‡ßá‡¶∂‡¶® ‡¶∞‡ßá‡¶´‡¶æ‡¶∞‡ßá‡¶≤ ‡¶¨‡ßã‡¶®‡¶æ‡¶∏'
                });

                const index = users.findIndex(u => u.id === referrer.id);
                users[index] = referrer;
                
                localStorage.setItem('incomeHubUsers', JSON.stringify(users));
            }
        }

        function generateReferralCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let result = '';
            for (let i = 0; i < 8; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return 'REF' + result;
        }
    </script>
</body>
</html>
